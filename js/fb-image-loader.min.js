/**
*
* WubFBAlbum v1.0 - JQuery Plugin
* 
* License: http://www.opensource.org/licenses/mit-license.php
* (c) Mark Renney, www.wubbleyou.co.uk
* 17/10/2012
*
**/
(function(a){function d(b,c){if(c.albumID=="")return false;var d="https://graph.facebook.com/"+c.albumID+"?fields=photos,cover_photo,name";var e="";var f="";var g=true;a.ajax({type:"GET",url:d,dataType:"jsonp",async:c.async,success:function(d){var f="";var h=1;while(f==""){if(a("."+c.classPreq+h.toString()).length<1)f=c.classPreq+h.toString();h++}a.each(d["photos"]["data"],function(){var b={caption:this["name"]!=undefined?this["name"]:"",url:this["source"],classname:f,albumcaption:d["name"]!=undefined?d["name"]:""};if(c.photowrapper!=""&&b.url!=undefined){var g=d["cover_photo"]!=undefined&&this["id"]!=undefined&&this["id"]==d["cover_photo"]?true:false;var h=(g?c.coverWrapper:c.photoWrapper).replace(/\%\(\w+\)/g,function(c,d){c=c.replace("%(","").replace(")","");return b[c]!=undefined?a("<div />").text(b[c]).html():c});if(g){e=h+e}else{e+=h}}});a.each(b,function(){a(this).html(e)});if(a.isFunction(c.onAlbumComplete))c.onAlbumComplete(b,f);g=true}});return g}var b;var c={allalbums:function(){var c=this;if(b.pageName=="")return false;var e="https://graph.facebook.com/"+b.pageName+"/albums";a.ajax({type:"GET",url:e,dataType:"jsonp",async:b.async,success:function(e){a.each(e["data"],function(){var e=b;e.albumID=this["id"];var f=a("<div></div>").addClass("newclass");if(d(f,e)){a(c).append(f)}})}});return this},onealbum:function(){d(this,b);return this}};a.fn.wubFBAlbums=function(d,e,f){b=a.extend({albumID:"",pageName:"",coverWrapper:'<div class = "albumholder"><div class = "albumimg">'+'<a href = "%(url)" class = "%(classname)" title = "%(caption)"><img src = "%(url)" alt = "%(caption)" /></a></div>'+'<div class = "albumname">%(albumcaption)</div></div>',photoWrapper:'<a href = "%(url)" class = "%(classname)" title = "%(caption)"></a>',classPreq:"wubFB",async:"true"},e);if(c[d]){return c[d].apply(this,Array.prototype.slice.call(arguments,2))}else{a.error("Method "+d+" does not exist on jQuery.wubFBAlbums")}}})(jQuery)