/**
*
* WubFBAlbum v1.0 - JQuery Plugin
* 
* License: http://www.opensource.org/licenses/mit-license.php
* (c) Mark Renney, www.wubbleyou.co.uk
* 17/10/2012
*
**/
(function(e){function r(t,n){if(n.albumID=="")return false;var r="https://graph.facebook.com/"+n.albumID+"?fields=photos.limit(200),cover_photo,name";var i="";var s="";var o=true;e.ajax({type:"GET",url:r,dataType:"jsonp",async:n.async,success:function(r){var s="";var u=1;while(s==""){if(e("."+n.classPreq+u.toString()).length<1)s=n.classPreq+u.toString();u++}if(typeof r["photos"]!="undefined"&&typeof r["photos"]["data"]!="undefined"){e.each(r["photos"]["data"],function(){var t={caption:this["name"]!=undefined?this["name"]:"",url:this["source"],classname:s,albumcaption:r["name"]!=undefined?r["name"]:""};if(n.photowrapper!=""&&t.url!=undefined){var o=r["cover_photo"]!=undefined&&this["id"]!=undefined&&this["id"]==r["cover_photo"]?true:false;var u=(o?n.coverWrapper:n.photoWrapper).replace(/\%\(\w+\)/g,function(n,r){n=n.replace("%(","").replace(")","");return t[n]!=undefined?e("<div />").text(t[n]).html():n});if(o){i=u+i}else{i+=u}}});e.each(t,function(){e(this).html(i)});if(e.isFunction(n.onAlbumComplete))n.onAlbumComplete(t,s);o=true}o=false}});return o}var t;var n={allalbums:function(){var n=this;if(t.pageName=="")return false;var i="https://graph.facebook.com/"+t.pageName+"/albums";e.ajax({type:"GET",url:i,dataType:"jsonp",async:t.async,success:function(i){if(typeof i["data"]!="undefined"){e.each(i["data"],function(){var i=t;i.albumID=this["id"];var s=e("<div></div>").addClass("newclass");if(r(s,i)){e(n).append(s)}})}}});return this},onealbum:function(){r(this,t);return this}};e.fn.wubFBAlbums=function(r,i,s){t=e.extend({albumID:"",pageName:"",coverWrapper:'<div class = "albumholder"><div class = "albumimg">'+'<a href = "%(url)" class = "%(classname)" title = "%(caption)"><img src = "%(url)" alt = "%(caption)" /></a></div>'+'<div class = "albumname">%(albumcaption)</div></div>',photoWrapper:'<a href = "%(url)" class = "%(classname)" title = "%(caption)"></a>',classPreq:"wubFB",async:"true"},i);if(n[r]){return n[r].apply(this,Array.prototype.slice.call(arguments,2))}else{e.error("Method "+r+" does not exist on jQuery.wubFBAlbums")}}})(jQuery)